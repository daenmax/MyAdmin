## 说明

数据权限是根据用户绑定的角色进行划分，等级有

```
0=本人数据，1=本部门数据，2=本部门及以下数据，3=全部数据，4=自定义权限（指定部门）
```

## 如何使用

业务表中需要有`创建人用户ID`这个字段，本框架使用的字段名叫`create_id`。
只要有这个字段就可以实现数据权限

### 查询

alias表示表的别名，就是你自己写的SQL，里面业务表的别名

field表示`创建人用户ID`字段，默认是`create_id`

#### 1.自己在XML里写SQL

例如分页接口，在mapper方法上，增加注解`@DataScope`，例如

```java
@DataScope(alias = "td")
IPage<TestDataPageDto> getPage(Page<TestDataPageDto> page,@Param("vo") TestDataPageVo vo);
```

#### 2.使用LambdaQueryWrapper

例如分页接口，如下案例，并且包含了 `时间区间筛选`、`排序字段`可供参考

在impl实现方法上增加注解`@DataScope`

```java
/**
 * 字典分页列表
 *
 * @param vo
 * @return
 */
@Override
@DataScope(alias = "sys_dict")
public IPage<SysDict> getPage(SysDictPageVo vo){
        LambdaQueryWrapper<SysDict> wrapper=new LambdaQueryWrapper<>();
        wrapper.like(ObjectUtil.isNotEmpty(vo.getName()),SysDict::getName,vo.getName());
        wrapper.like(ObjectUtil.isNotEmpty(vo.getCode()),SysDict::getCode,vo.getCode());
        wrapper.eq(ObjectUtil.isNotEmpty(vo.getStatus()),SysDict::getStatus,vo.getStatus());
        Object beginTime=vo.getParams().get("beginTime");
        Object endTime=vo.getParams().get("endTime");
        wrapper.between(ObjectUtil.isNotEmpty(beginTime)&&ObjectUtil.isNotEmpty(endTime),SysDict::getCreateTime,beginTime,endTime);
        Page<SysDict> sysDictPage=sysDictMapper.selectPage(vo.getPage(),wrapper);
        return sysDictPage;
        }

```

### 修改和删除

待完善

